<app-navbar></app-navbar>

<div class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-8">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-gray-900">Ajouter une borne</h1>
      <p class="text-gray-600 mt-2">Remplissez les informations de votre borne de recharge</p>
    </div>

    <!-- Messages -->
    @if (error()) {
      <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg">
        <p class="text-red-600">{{ error() }}</p>
      </div>
    }

    @if (success()) {
      <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
        <p class="text-green-600">Station créée avec succès ! Redirection...</p>
      </div>
    }

    <!-- Formulaire -->
    <div class="bg-white rounded-2xl shadow-xl p-8">
      <form [formGroup]="stationForm" (ngSubmit)="onSubmit()">
        <!-- Nom -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2">Nom de la borne *</label>
          <input type="text" formControlName="name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none" placeholder="Ex: Borne Parking Centre-Ville"/>
        </div>

        <!-- Prix et Puissance -->
        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Prix (€/h) *</label>
            <input type="number" step="0.01" formControlName="hourlyPrice" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Puissance (kW) *</label>
            <input type="number" step="0.1" formControlName="chargingPowerKw" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
          </div>
        </div>

        <!-- Adresse -->
        <div formGroupName="address" class="mb-6">
          <h3 class="text-lg font-semibold mb-4">Adresse</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Rue *</label>
              <input type="text" formControlName="street" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Numéro *</label>
              <input type="text" formControlName="number" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Ville *</label>
              <input type="text" formControlName="city" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Code postal *</label>
              <input type="text" formControlName="postalCode" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
            </div>
          </div>
        </div>

        <!-- Localisation GPS -->
        <div formGroupName="location" class="mb-6">
          <h3 class="text-lg font-semibold mb-4">Coordonnées GPS</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Latitude *</label>
              <input type="number" step="0.000001" formControlName="latitude" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Longitude *</label>
              <input type="number" step="0.000001" formControlName="longitude" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
            </div>
          </div>
        </div>

        <!-- Instructions -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2">Instructions (optionnel)</label>
          <textarea formControlName="instruction" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"></textarea>
        </div>

        <!-- Support -->
        <div class="mb-6">
          <label class="flex items-center">
            <input type="checkbox" formControlName="hasStand" class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary"/>
            <span class="ml-2 text-gray-700">Cette borne dispose d'un support</span>
          </label>
        </div>

        <!-- Boutons -->
        <div class="flex gap-4">
          <button type="submit" [disabled]="loading()" class="flex-1 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition disabled:opacity-50">
            @if (loading()) {
              <span>Création en cours...</span>
            } @else {
              <span>Créer la borne</span>
            }
          </button>
          <button type="button" (click)="cancel()" class="px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition">
            Annuler
          </button>
        </div>
      </form>
    </div>
  </div>
</div>